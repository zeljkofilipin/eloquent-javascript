<!-- from http://eloquentjavascript.net/code/#18.1 -->
<!doctype html>
<script src="code/promise.js"></script>

<textarea id="code">return "hi";</textarea>
<button id="button">Run</button>
<pre id="output"></pre>

<script>
	document.querySelector('#button').addEventListener('click', function() {
		var code = document.querySelector('#code').value;
		var output = document.querySelector('#output');
		try {
			var result = new Function(code)();
			output.innerText = String(result);
		} catch (e) {
			output.innerText = 'Error: ' + e;
		}
	});
</script>
